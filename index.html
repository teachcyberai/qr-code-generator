<!--MultiQR – Multi-option QR Generator (Blogger-ready, body-only) - UPDATED-->



<style>
  .mq-wrap{max-width:900px;margin:28px auto;padding:18px;border-radius:14px;box-shadow:0 10px 30px rgba(2,6,23,0.06);background:#fff;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  .mq-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
  .mq-title{display:flex;gap:10px;align-items:center}
  .mq-title h2{margin:0;font-size:18px}
  .mq-badge{font-size:12px;padding:4px 8px;border-radius:999px;background:#f1f5f9}
  .mq-grid{display:grid;gap:12px}
  @media(min-width:860px){.mq-grid{grid-template-columns:1fr 380px}}
  .card{border:1px solid #eef2f7;border-radius:12px;padding:14px}
  .tabs{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:10px}
  .tab{padding:8px 10px;border-radius:10px;border:1px solid transparent;cursor:pointer;font-size:13px}
  .tab.active{background:#111827;color:#fff;border-color:#111827}
  label{display:block;font-size:13px;margin:8px 0 6px;color:#1f2937}
  input[type=text], input[type=tel], input[type=url], input[type=email], textarea, select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #e6eef6;font:inherit;outline:none}
  .row2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .actions{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
  .btn{cursor:pointer;border:0;border-radius:10px;padding:10px 12px;font-weight:600}
  .btn.primary{background:#0f172a;color:#fff}
  .btn.ghost{background:#f3f4f6}
  .qrbox{display:flex;align-items:center;justify-content:center;min-height:280px;background:#fbfdff;border:1px dashed #e6eef6;border-radius:10px}
  .muted{color:#64748b;font-size:13px}
  .small{font-size:12px;color:#475569;margin-top:8px}
  .inline{display:inline-block;vertical-align:middle}
</style>

<div class="mq-wrap">
  <div class="mq-header">
    <div class="mq-title">
      <h2>MultiQR — মাল্টি-অপশন QR Generator</h2>
      <span class="mq-badge">Teach Cyber Ai</span>
    </div>
    <div class="small">Author: QuickQR • <span id="userName">Dhrubo</span></div>
  </div>

  <div class="mq-grid">
    <!--Left: Controls-->
    <div class="card">
      <div class="tabs" id="tabs">
        <div class="tab active" data-type="url">Website</div>
        <div class="tab" data-type="text">Text</div>
        <div class="tab" data-type="phone">Phone</div>
        <div class="tab" data-type="sms">SMS</div>
        <div class="tab" data-type="email">Email</div>
        <div class="tab" data-type="wifi">Wi-Fi</div>
        <div class="tab" data-type="contact">Contact (vCard)</div>
        <div class="tab" data-type="event">Event</div>
        <div class="tab" data-type="upi">UPI</div>
      </div>

      <!--form area-->
      <div id="forms">
        <!--Website-->
        <div class="form" data-type="url">
          <label>Website URL</label>
          <input id="url_input" placeholder="https://teachcyberai.in" type="url" />
        </div>

        <!--Text-->
        <div class="form" data-type="text" style="display: none;">
          <label>Text / Message</label>
          <textarea id="text_input" placeholder="যেকোনো টেক্সট লিখো..." rows="4"></textarea>
        </div>

        <!--Phone-->
        <div class="form" data-type="phone" style="display: none;">
          <label>Phone Number (with country code)</label>
          <input id="phone_input" placeholder="+8801712345678" type="tel" />
        </div>

        <!--SMS-->
        <div class="form" data-type="sms" style="display: none;">
          <label>Phone Number</label>
          <input id="sms_number" placeholder="+8801712345678" type="tel" />
          <label>Message</label>
          <input id="sms_body" type="text" />
        </div>

        <!--Email-->
        <div class="form" data-type="email" style="display: none;">
          <label>To (email)</label>
          <input id="email_to" placeholder="someone@example.com" type="email" />
          <label>Subject</label>
          <input id="email_sub" type="text" />
          <label>Body</label>
          <textarea id="email_body" rows="3"></textarea>
        </div>

        <!--Wi-Fi-->
        <div class="form" data-type="wifi" style="display: none;">
          <label>SSID (Network Name)</label>
          <input id="wifi_ssid" type="text" />
          <label>Password</label>
          <input id="wifi_pass" type="text" />
          <label>Encryption</label>
          <select id="wifi_type">
            <option value="WPA">WPA/WPA2</option>
            <option value="WEP">WEP</option>
            <option value="nopass">No Password</option>
          </select>
          <label>Hidden Network?</label>
          <select id="wifi_hidden"><option selected="" value="false">No</option><option value="true">Yes</option></select>
          <div class="small">Note: ফোনে স্ক্যান করে 'Connect' অপশন দেখাতে ইন্টারনাল সাপোর্ট দরকার।</div>
        </div>

        <!--Contact (vCard)-->
        <div class="form" data-type="contact" style="display: none;">
          <label>Full Name</label>
          <input id="vc_name" type="text" />
          <label>Organization</label>
          <input id="vc_org" type="text" />
          <div class="row2">
            <div>
              <label>Phone</label>
              <input id="vc_phone" placeholder="+8801712345678" type="tel" />
            </div>
            <div>
              <label>Email</label>
              <input id="vc_email" placeholder="you@example.com" type="email" />
            </div>
          </div>
          <label>Website</label>
          <input id="vc_url" placeholder="https://teachcyberai.in" type="url" />
          <label>Address</label>
          <input id="vc_addr" type="text" />
        </div>

        <!--Event-->
        <div class="form" data-type="event" style="display: none;">
          <label>Event Title</label>
          <input id="ev_title" placeholder="Meetup: Ethical Hacking" type="text" />
          <label>Start (YYYY-MM-DD HH:MM)</label>
          <input id="ev_start" placeholder="2025-09-01 15:00" type="text" />
          <label>End (YYYY-MM-DD HH:MM)</label>
          <input id="ev_end" placeholder="2025-09-01 17:00" type="text" />
          <label>Location</label>
          <input id="ev_loc" type="text" />
          <label>Description</label>
          <textarea id="ev_desc" rows="3"></textarea>
          <div class="small">Note: date-time should be local; we'll format as basic iCal VEVENT.</div>
        </div>

        <!--UPI-->
        <div class="form" data-type="upi" style="display: none;">
          <label>Payee UPI ID (pa)</label>
          <input id="upi_pa" placeholder="someone@upi" type="text" />
          <label>Payee Name (pn)</label>
          <input id="upi_pn" type="text" />
          <div class="row2">
            <div>
              <label>Amount (optional)</label>
              <input id="upi_amount" type="text" />
            </div>
            <div>
              <label>Currency</label>
              <input id="upi_cur" type="text" value="INR" />
            </div>
          </div>
          <label>Note (optional)</label>
          <input id="upi_note" placeholder="Thanks!" type="text" />
          <div class="small">UPI QR uses `upi://pay?...` format or plain text link for many apps.</div>
        </div>
      </div>

      <!--settings-->
      <div class="row2" style="margin-top: 12px;">
        <div>
          <label>Size: <span id="mq_size_label">300</span> px</label>
          <input id="mq_size" max="768" type="range" value="300" />
        </div>
        <div>
          <label>Error Correction</label>
          <select id="mq_ecc">
            <option selected="" value="M">M</option>
            <option value="L">L</option>
            <option value="Q">Q</option>
            <option value="H">H</option>
          </select>
        </div>
      </div>
      <label>Dark Color</label>
      <input id="mq_color" placeholder="#000000" type="text" value="#111827" />

      <div class="actions">
        <button class="btn primary" id="mq_generate">Generate QR</button>
        <button class="btn ghost" id="mq_clear">Clear</button>
        <button class="btn ghost" disabled="" id="mq_copy">Copy Data URL</button></div><div class="actions">
        <button class="btn ghost" disabled="" id="mq_download">Download PNG</button>
      </div>

      <p class="small" id="mq_payload_preview">Payload: <span class="muted">—</span></p>
    </div>

    <!--Right: Preview-->
    <div class="card">
      <h3 style="margin-top: 0px;">Preview</h3>
      <div class="qrbox" id="mq_preview">
        <span class="muted">QR preview will appear here</span>
      </div>
      <div class="small" style="margin-top: 10px;">Tip: স্ক্যান করে ভেরিফাই করে নেবো — ভিন্ন ডিভাইসে ভিন্ন রেস্পন্স থাকতে পারে (যেমন Wi-Fi auto connect)।</div><div class="small" style="margin-top: 10px;"><br /></div>
    </div>
  </div>
</div>

<!--QRCode.js CDN-->
<script referrerpolicy="no-referrer" src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>



<script>
  // init
  document.getElementById('userName').textContent = 'Dhrubo';
  const tabs = document.querySelectorAll('.tab');
  const forms = document.querySelectorAll('.form');
  const mq_size = document.getElementById('mq_size');
  const mq_size_label = document.getElementById('mq_size_label');
  const mq_ecc = document.getElementById('mq_ecc');
  const mq_color = document.getElementById('mq_color');
  const preview = document.getElementById('mq_preview');
  const payloadPreview = document.getElementById('mq_payload_preview').querySelector('span');
  let qrobj = null;
  let lastDataURL = null;
  let lastPayload = '';

  function setActive(type){
    tabs.forEach(t=> t.classList.toggle('active', t.dataset.type===type));
    forms.forEach(f=> f.style.display = (f.dataset.type===type ? 'block' : 'none'));
    buildPayloadPreview(); // reset preview text
  }

  tabs.forEach(t=> t.addEventListener('click', ()=> setActive(t.dataset.type)));

  // size label
  mq_size.addEventListener('input', ()=> { mq_size_label.textContent = mq_size.value; });

  // helpers to build payload per type
  function escapeVCard(s){
    // replace actual newlines inside a value with literal \n (as vCard expects)
    return (s||'').replace(/\r\n/g,'\n').replace(/\n/g,'\\n').replace(/,/g,'\\,');
  }

  function buildPayload(){
    const active = document.querySelector('.tab.active').dataset.type;
    switch(active){
      case 'url': {
        const v = (document.getElementById('url_input').value||'').trim();
        return v || '';
      }
      case 'text': {
        return (document.getElementById('text_input').value||'').trim();
      }
      case 'phone': {
        const ph = (document.getElementById('phone_input').value||'').trim();
        return ph ? ('tel:' + ph) : '';
      }
      case 'sms': {
        const n = (document.getElementById('sms_number').value||'').trim();
        const b = (document.getElementById('sms_body').value||'').trim();
        if(!n) return '';
        return 'SMSTO:' + n + ':' + b;
      }
      case 'email': {
        const to = (document.getElementById('email_to').value||'').trim();
        const sub = (document.getElementById('email_sub').value||'').trim();
        const body = (document.getElementById('email_body').value||'').trim();
        if(!to) return '';
        let uri = 'mailto:' + to;
        const params = [];
        if(sub) params.push('subject=' + encodeURIComponent(sub));
        if(body) params.push('body=' + encodeURIComponent(body));
        if(params.length) uri += '?' + params.join('&');
        return uri;
      }
      case 'wifi': {
        const ssid = document.getElementById('wifi_ssid').value||'';
        const pass = document.getElementById('wifi_pass').value||'';
        const type = document.getElementById('wifi_type').value || 'WPA';
        const hidden = document.getElementById('wifi_hidden').value === 'true' ? 'true' : 'false';
        if(!ssid) return '';
        const enc = (type === 'nopass') ? 'nopass' : type;
        return `WIFI:T:${enc};S:${escapeSemicolon(ssid)};P:${escapeSemicolon(pass)};H:${hidden};;`;
      }
      case 'contact': {
        const name = (document.getElementById('vc_name').value||'').trim();
        const org = (document.getElementById('vc_org').value||'').trim();
        const phone = (document.getElementById('vc_phone').value||'').trim();
        const email = (document.getElementById('vc_email').value||'').trim();
        const url = (document.getElementById('vc_url').value||'').trim();
        const addr = (document.getElementById('vc_addr').value||'').trim();
        // vCard 3.0 minimal — join with actual newline characters
        let lines = ['BEGIN:VCARD','VERSION:3.0'];
        if(name) lines.push('FN:' + escapeVCard(name));
        if(org) lines.push('ORG:' + escapeVCard(org));
        if(phone) lines.push('TEL;TYPE=CELL:' + phone);
        if(email) lines.push('EMAIL;TYPE=INTERNET:' + email);
        if(url) lines.push('URL:' + url);
        if(addr) lines.push('ADR;TYPE=HOME:;;' + escapeVCard(addr));
        lines.push('END:VCARD');
        return lines.join('\n');
      }
      case 'event': {
        const title = (document.getElementById('ev_title').value||'').trim();
        const start = (document.getElementById('ev_start').value||'').trim();
        const end = (document.getElementById('ev_end').value||'').trim();
        const loc = (document.getElementById('ev_loc').value||'').trim();
        const desc = (document.getElementById('ev_desc').value||'').trim();
        if(!title || !start) return '';
        function toIcal(s){
          const m = s.match(/^(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2})/);
          if(!m) return '';
          return m[1]+m[2]+m[3]+'T'+m[4]+m[5]+'00';
        }
        const sI = toIcal(start);
        const eI = end ? toIcal(end) : '';
        let lines = ['BEGIN:VCALENDAR','VERSION:2.0','BEGIN:VEVENT'];
        if(title) lines.push('SUMMARY:' + title);
        if(sI) lines.push('DTSTART:' + sI);
        if(eI) lines.push('DTEND:' + eI);
        if(loc) lines.push('LOCATION:' + loc);
        if(desc) lines.push('DESCRIPTION:' + desc);
        lines.push('END:VEVENT','END:VCALENDAR');
        return lines.join('\n');
      }
      case 'upi': {
        const pa = (document.getElementById('upi_pa').value||'').trim();
        const pn = (document.getElementById('upi_pn').value||'').trim();
        const amt = (document.getElementById('upi_amount').value||'').trim();
        const cu = (document.getElementById('upi_cur').value||'INR').trim();
        const note = (document.getElementById('upi_note').value||'').trim();
        if(!pa) return '';
        let q = `upi://pay?pa=${encodeURIComponent(pa)}&pn=${encodeURIComponent(pn||'')}`;
        if(amt) q += `&am=${encodeURIComponent(amt)}`;
        if(cu) q += `&cu=${encodeURIComponent(cu)}`;
        if(note) q += `&tn=${encodeURIComponent(note)}`;
        return q;
      }
      default: return '';
    }
  }

  function escapeSemicolon(s){ return (s||'').replace(/;/g,'\\;'); }

  function buildPayloadPreview(){
    const pl = buildPayload();
    payloadPreview.textContent = pl ? (pl.length > 180 ? pl.slice(0,180)+'…' : pl) : '—';
    return pl;
  }

  // helper to make safe filename
  function makeSafeFilename(payload, type){
    let base = (type || 'qr') + '-' + (payload||'data').slice(0,40);
    base = base.replace(/[^a-z0-9]+/gi,'-').replace(/^-+|-+$/g,'').toLowerCase();
    if(!base) base = 'qr-code';
    return base + '.png';
  }

  // generate QR
  function mq_generate_qr(){
    const payload = buildPayload(); // full payload
    buildPayloadPreview(); // update preview text
    if(!payload) { alert('Please fill required fields for the selected option.'); return; }
    const size = parseInt(mq_size.value,10) || 300;
    const color = /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(mq_color.value.trim()) ? mq_color.value.trim() : '#111827';
    const eccMap = {L: QRCode.CorrectLevel.L, M: QRCode.CorrectLevel.M, Q: QRCode.CorrectLevel.Q, H: QRCode.CorrectLevel.H};
    const ecc = eccMap[mq_ecc.value] || QRCode.CorrectLevel.M;

    // clear preview
    preview.innerHTML = '';
    try{
      qrobj = new QRCode(preview, {
        text: payload,
        width: size,
        height: size,
        colorDark: color,
        colorLight: "#ffffff",
        correctLevel: ecc
      });
    }catch(e){
      alert('QR generation failed: ' + (e && e.message ? e.message : e));
      return;
    }

    // enable download and copy after a tick
    setTimeout(()=>{
      const node = preview.querySelector('canvas, img');
      if(node){
        document.getElementById('mq_download').disabled = false;
        document.getElementById('mq_copy').disabled = false;
        // save last dataURL and payload
        const canvas = preview.querySelector('canvas');
        if(canvas) lastDataURL = canvas.toDataURL('image/png');
        else if(preview.querySelector('img')){
          const img = preview.querySelector('img');
          const c = document.createElement('canvas');
          c.width = img.naturalWidth || img.width;
          c.height = img.naturalHeight || img.height;
          const ctx = c.getContext('2d');
          ctx.fillStyle = '#ffffff';
          ctx.fillRect(0,0,c.width,c.height);
          ctx.drawImage(img,0,0);
          lastDataURL = c.toDataURL('image/png');
        }
        lastPayload = payload;
      }
    }, 60);
  }

  // clear
  function mq_clear_all(){
    preview.innerHTML = '<span class="muted">QR preview will appear here</span>';
    payloadPreview.textContent = '—';
    document.getElementById('mq_download').disabled = true;
    document.getElementById('mq_copy').disabled = true;
    lastDataURL = null;
    lastPayload = '';
  }

  // download
  function mq_download_png(){
    if(!lastDataURL){ alert('Please generate QR first.'); return; }
    const type = document.querySelector('.tab.active').dataset.type || 'qr';
    const filename = makeSafeFilename(lastPayload, type);
    const a = document.createElement('a');
    a.href = lastDataURL;
    a.download = filename;
    a.click();
  }

  // copy data url
  function mq_copy_dataurl(){
    if(!lastDataURL){ alert('Generate QR first.'); return; }
    // try Clipboard API
    if(navigator.clipboard && window.ClipboardItem){
      fetch(lastDataURL).then(res => res.blob()).then(blob => {
        navigator.clipboard.write([new ClipboardItem({'image/png': blob})]).then(()=> {
          const btn = document.getElementById('mq_copy');
          btn.textContent = 'Copied ✔';
          setTimeout(()=> btn.textContent = 'Copy Data URL', 900);
        }).catch(()=> fallbackCopy());
      }).catch(()=> fallbackCopy());
    } else fallbackCopy();

    function fallbackCopy(){
      const ta = document.createElement('textarea'); ta.value = lastDataURL; document.body.appendChild(ta);
      ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
      const btn = document.getElementById('mq_copy');
      btn.textContent = 'Copied ✔';
      setTimeout(()=> btn.textContent = 'Copy Data URL', 900);
    }
  }

  // wire buttons
  document.getElementById('mq_generate').addEventListener('click', mq_generate_qr);
  document.getElementById('mq_clear').addEventListener('click', mq_clear_all);
  document.getElementById('mq_download').addEventListener('click', mq_download_png);
  document.getElementById('mq_copy').addEventListener('click', mq_copy_dataurl);

  // update preview payload on input for convenience (not regenerate QR)
  document.getElementById('forms').addEventListener('input', buildPayloadPreview);

  // initial
  setActive('url');
  document.getElementById('url_input').value = 'https://teachcyberai.in';
  buildPayloadPreview();
</script>

<h2 style="font-family: Arial; text-align: center;">📲 QR Code Decoder Web App</h2>

<p style="text-align: center;">একটি QR কোড ইমেজ আপলোড করুন এবং ভেতরের টেক্সট বা নম্বর জেনে নিন:</p>

<div style="margin: 20px; text-align: center;">

  <input accept="image/*" id="file-input" style="border-radius: 5px; border: 1px solid rgb(204, 204, 204); padding: 8px;" type="file" />

</div>

<canvas hidden="" id="qr-canvas"></canvas>

<div style="margin-top: 20px; text-align: center;">

  <p><b>Result:</b></p>

  <textarea cols="40" id="result" readonly="" rows="4" style="border-radius: 8px; border: 1px solid rgb(204, 204, 204); font-size: 14px; padding: 10px;"></textarea>

  <br /><br />

  <button id="copy-btn" style="background: rgb(76, 175, 80); border-radius: 6px; border: medium; color: white; cursor: pointer; padding: 8px 15px;">📋 Copy</button></div><div style="margin-top: 20px; text-align: center;">
	  </div><div style="margin-top: 20px; text-align: center;">

<div id="container-a04c7571160e8439a3bcf382e41af270"></div><br /><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">&nbsp;</div></div>

<!--jsQR লাইব্রেরি-->

<script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>

<script>

  const fileInput = document.getElementById('file-input');

  const canvas = document.getElementById('qr-canvas');

  const ctx = canvas.getContext('2d');

  const resultBox = document.getElementById('result');

  const copyBtn = document.getElementById('copy-btn');

  fileInput.addEventListener('change', e => {

    const file = e.target.files[0];

    if (!file) return;

    const img = new Image();

    img.onload = () => {

      canvas.width = img.width;

      canvas.height = img.height;

      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);

      const code = jsQR(imageData.data, imageData.width, imageData.height);

      if (code) {

        resultBox.value = code.data;

      } else {

        resultBox.value = "❌ কোনো QR কোড ডিকোড করা যায়নি।";

      }

    };

    img.src = URL.createObjectURL(file);

  });

  copyBtn.addEventListener('click', () => {

    if (resultBox.value.trim() !== "") {

      resultBox.select();

      document.execCommand('copy');

      alert("✅ কপি করা হয়েছে!");

    }

  });

</script>
